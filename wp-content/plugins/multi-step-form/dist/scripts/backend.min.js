!function(z){"use strict";var r="#fw-wizard-container",i="#fw-elements-container";function u(){"console"in window&&console.log.apply(console,arguments)}function n(){"console"in window&&console.warn.apply(console,arguments)}function o(e,a){z('<div id="fw-alert" style="background-color:'+(a?"#4caf50":"#f44336")+'">'+e+"</div>").hide().appendTo("#wpbody-content").slideDown().delay(3e3).slideUp()}function w(e,a){var t='<div class="fw-radio-option-element" data-type="option">';return t+='<input type="text" class="fw-radio-option" placeholder="'+wizard.i18n.radio.option+" "+a+'" value="'+e+'"></input>',t+='<div class="fw-remove-radio-option"><i class="fa fa-minus-circle" aria-hidden="true"></i></div></div>'}function s(e){u("block",e);var a,t,i,l,r,n,o,s,c,d,f,p,b='<div class="fw-step-block" data-type="'+e.type+'" >';switch(b+='<div class="fw-block-controls">',b+='<i class="fa fa-remove fw-remove-block" title="'+wizard.i18n.tooltips.removeBlock+'" aria-hidden="true"></i>',b+='<i class="fa fa-caret-up fw-toggle-block" aria-hidden="true"></i>',b+="</div>",b+=(a=e.type,t='<div class="fw-block-action fw-block-hndle">',t+='<i class="fa fa-arrows fw-move-block fw-block-hndle" aria-hidden="true"></i>',t+="<h4>"+a+"</h4>",t+="</div>"),b+='<div class="fw-block-fields">',e.type){case"radio":e.elements||(e.elements=[{type:"header",value:""},{type:"option",value:""}]),b+=function(e){u("radio",e);var a,t,i,l,r,n=0,o="";for(o+='<div class="fw-radio-option-container">',a=0,t=e.elements.length;a<t;a++)u("element",i=e.elements[a]),"option"===i.type?(1==a&&(o+="<label>"+wizard.i18n.radio.options+"</label>"),o+=w(i.value,1+n++)):o+=(l=i.value,r=void 0,r='<div class="fw-radio-option-element" data-type="header"><label>'+wizard.i18n.label+"</label>",r+='<input type="text" class="fw-radio-header fw-block-label" value="'+l+'"></input>',r+="</div>");return o+="</div>",o+='<button class="fw-radio-add"><i class="fa fa-plus" aria-hidden="true"></i> '+wizard.i18n.radio.addOption+"</button><br/>",o+='<label><input type="checkbox" class="fw-required"'+y(e.required)+"/> "+wizard.i18n.required+"</label>","true"==e.multichoice?o+='<label><input type="checkbox" class="fw-radio-multichoice" checked/>'+wizard.i18n.radio.multiple+' <i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.multiChoice+'"></i></label>':o+='<label><input type="checkbox" class="fw-radio-multichoice"/>'+wizard.i18n.radio.multiple+' <i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.multiChoice+'"></i></label>',o}(e);break;case"select":e.elements||(e.elements=[]),b+=function(e){u("select",e);var a=0,t="",i=wizard.i18n.select.placeholder?wizard.i18n.select.placeholder:"";for(t+='<div class="fw-select-option-container">',t+="<label>"+wizard.i18n.label+"</label>",t+='<input type="text" class="fw-block-label" value="'+e.label+'"></input>',t+="<label>"+i+"</label>",t+='<input type="text" class="fw-select-placeholder" value="'+e.placeholder+'"></input>',t+="<label>"+wizard.i18n.select.options+"</label>",t+='<textarea class="fw-select-options" rows="4" cols="50">',a=0;a<e.elements.length;a++)t+=e.elements[a]+"\n";return t+="</textarea>",t+="</div>",t+='<label><input type="checkbox" class="fw-select-search"'+y(e.search)+"/>"+wizard.i18n.select.search+"</label>",t+='<label><input type="checkbox" class="fw-required"'+y(e.required)+"/> "+wizard.i18n.required+"</label>"}(e);break;case"checkbox":b+=function(e){u("checkbox",e);var a="";return a+="<label>"+wizard.i18n.label+"</label>",a+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+e.label+'"></input><br/>',a+='<label><input type="checkbox" class="fw-required"'+y(e.required)+"/>"+wizard.i18n.required+"</label>"}(e);break;case"text":b+=function(e){u("textInput",e);var a="";return a+="<label>"+wizard.i18n.label+"</label>",a+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+e.label+'"></input><br/>',a+='<label><input type="checkbox" class="fw-required"'+y(e.required)+"/>"+wizard.i18n.required+"</label>"}(e);break;case"email":b+=(f=e,p="",p+="<label>"+wizard.i18n.label+"</label>",p+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+f.label+'"></input><br/>',p+='<label><input type="checkbox" class="fw-required"'+y(f.required)+"/>"+wizard.i18n.required+"</label>");break;case"file":b+=(c=e,d="",d+="<label>"+wizard.i18n.label+"</label>",d+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+c.label+'"></input><br/>',d+='<label><input type="checkbox" class="fw-file-multi"'+y(c.multi)+"/>"+wizard.i18n.multifile+"</label>",d+='<label><input type="checkbox" class="fw-required"'+y(c.required)+"/>"+wizard.i18n.required+"</label>");break;case"date":b+=(o=e,s="",s+="<label>"+wizard.i18n.label+"</label>",s+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+o.label+'"></input><br/>',s+="<label>"+wizard.i18n.dateformat+'<a target="_blank" href="http://t1m0n.name/air-datepicker/docs/#sub-section-9"><i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.dateformat+'"></i></a></label>',s+='<input type="text" class="fw-date-format fw-block-label" placeholder="'+wizard.i18n.dateformat+'" value="'+(o.format?o.format:"yy-mm-dd")+'" ></input><br/>',s+='<label><input type="checkbox" class="fw-required"'+y(o.required)+"/>"+wizard.i18n.required+"</label>");break;case"textarea":b+=function(e){u("textArea",e);var a="";return a+="<label>"+wizard.i18n.label+"</label>",a+='<input type="text" class="fw-textarea-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+e.label+'"></input><br/>',a+='<label><input type="checkbox" class="fw-required"'+y(e.required)+"/>"+wizard.i18n.required+"</label>"}(e);break;case"paragraph":b+=(r=e,n="",n+="<label>"+wizard.i18n.paragraph.textHtml+' <i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.paragraph+'"></i></label>',n+='<textarea class="fw-paragraph-text fw-block-label" placeholder="'+wizard.i18n.paragraph.text+'">'+(r.text?r.text:"")+"</textarea>",n+='<label style="display:none;"><input type="checkbox" class="fw-required"'+y(r.required)+"/>"+wizard.i18n.required+"</label>");break;case"registration":b+=(l="",l+='<label><input type="checkbox" class="fw-required"'+y((i=e).required)+"/>"+wizard.i18n.required+"</label>",l+='<p class="msfp-registration-info">'+wizard.i18n.registration.info+"</p>",l+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-email" checked disabled="disabled"/>'+wizard.i18n.registration.email+"</label>",l+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-username" checked disabled="disabled"/>'+wizard.i18n.registration.username+"</label>",l+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-password"'+y(i.password)+"/>"+wizard.i18n.registration.password+"</label>",l+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-firstname"'+y(i.firstname)+"/>"+wizard.i18n.registration.firstname+"</label>",l+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-lastname"'+y(i.lastname)+"/>"+wizard.i18n.registration.lastname+"</label>",l+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-website"'+y(i.website)+"/>"+wizard.i18n.registration.website+"</label>",l+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-bio"'+y(i.bio)+"/>"+wizard.i18n.registration.bio+"</label>")}return b+="</div>",b+='<div class="fw-clearfix"></div>',b+="</div>"}function c(e,a){u("part",e);var t='<div class="'+a+'">';return t+='<div class="fw-section-hndle"><i class="fa fa-arrows"></i></div>',t+='<input type="text" class="fw-part-title" value="'+e.title+'" placeholder="'+wizard.i18n.partTitle+'"></input>',t+='<div class="fw-remove-part" title="'+wizard.i18n.removeSection+'">',t+='<i class="fa fa-remove"></i>',t+='</div><div class="inside connectedSortable">',t+=function(e){var a,t,i="";for(a=0,t=e.length;a<t;a++)if("conditional"==e[a].type){i+=s(e[a].block);var l={prec_block_id:e[a].prec_block_id,prec_operator:e[a].prec_operator,prec_value:e[a].prec_value,visible:e[a].visible};i=i.slice(0,-6),i+='<input class="msf-block-meta" name="msf-block-meta-'+a+'" type="hidden" value="'+encodeURI(JSON.stringify(l))+'">',i+="</div>"}else i+=s(e[a]);return i}(e.blocks),t+='</div><div class="fw-add-element">',t+='<a href="#TB_inline?width=400&height=200&inlineId=fw-thickbox-content" class="thickbox"><i class="fa fa-plus"></i> '+wizard.i18n.addElement+"</a>",t+="</div>",t+="</div>"}function t(e,a){var t="fw-headline-"+a,i="fw-copy-text-"+a,l='<div class="fw-step"><div class="form-wrap">';return l+='<div class="input form-field">',l+='<label for="'+("fw-title-"+a)+'"><b>'+wizard.i18n.title+"</b>",l+='<i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.title+'"></i></label>',l+='<input type="text" class="fw-step-title" value="'+e.title+'"></input>',l+="</div>",l+='<div class="input form-field">',l+='<label for="'+t+'"><b>'+wizard.i18n.headline+"</b>",l+='<i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.headline+'"></i></label>',l+='<input type="text" class="fw-step-headline" value="'+e.headline+'"></input>',l+="</div>",l+='<div class="input form-field">',l+='<label for="'+i+'"><b>'+wizard.i18n.copyText+"</b>",l+='<i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.copyText+'"></i></label>',l+='<input type="text" class="fw-step-copy_text" value="'+e.copy_text+'"></input>',l+="</div>",l+='<div class="fw-step-parts">'+function(e){var a,t=e.length,i='<div><div class="fw-parts-header"><h3>Sections</h3></div>';for(i+='<div class="fw-column-buttons">',i+='<button type="button" class="fw-button-one-column"><i class="fa fa-align-justify"></i></button>',i+='<button type="button" class="fw-button-two-columns"><i class="fa fa-align-justify"></i> <i class="fa fa-align-justify"></i></button>',i+="</div>",i+='<div class="fw-parts-container">',a=0,t=e.length;a<t;a++)i+=c(e[a],"fw-step-part");return i+="</div>",i+='<div class="fw-parts-footer">',i+='<a class="fw-add-part"><i class="fa fa-plus"></i> '+wizard.i18n.addSection+"</a>",i+="</div>",i+="</div>"}(e.parts)+"</div>",l+='</div><div class="fw-clearfix"></div></div>'}function l(e){var a='<div class="postbox">';return a+='<div class="fw-movediv hndle ui-sortable-handle"><i class="fa fa-arrows"></i></div>',a+='<h1 class="fw-step-h1 hndle ui-sortable-handle"><span>',a+=e.title+"</span></h1>",a+='<div class="fw-step-controls">',a+='<i class="fa fa-remove fw-remove-step" title="'+wizard.i18n.tooltips.removeStep+'" aria-hidden="true"></i>',a+='<i class="fa fa-caret-up fw-toggle-step" aria-hidden="true"></i>',a+='<i class="fa fa-files-o fw-duplicate-step" title="duplicate step" aria-hidden="true"></i>',a+="</div>",a+='<div class="fw-clearfix"></div>',a+=t(e),a+='<div class="fw-clearfix"></div>',a+="</div>"}function d(e){var a,t,i,l,r,n,o,s,c,d,f,p,b,u,w,v,h,m,k,g,y,x={};switch(x.type=e.attr("data-type")){case"radio":k=e,y=(g=x).elements=[],k.find(".fw-radio-option-element").each(function(e,a){var t,i,l;y.push((t=z(a),"option"===(l=(i={}).type=t.attr("data-type"))?i.value=t.find(".fw-radio-option").val():"header"===l&&(i.value=t.find(".fw-radio-header").val()),i))}),g.required=k.find(".fw-required").prop("checked"),g.multichoice=k.find(".fw-radio-multichoice").prop("checked");break;case"select":h=x,m=(v=e).find(".fw-select-options").val().split("\n"),h.required=v.find(".fw-required").prop("checked"),h.search=v.find(".fw-select-search").prop("checked"),h.label=v.find(".fw-block-label").val(),h.placeholder=v.find(".fw-select-placeholder").val(),h.elements=m.filter(function(e){return""!==e&&" "!==e});break;case"checkbox":u=e,(w=x).label=u.find(".fw-text-label").val(),w.required=u.find(".fw-required").prop("checked");break;case"text":p=e,(b=x).label=p.find(".fw-text-label").val(),b.required=p.find(".fw-required").prop("checked");break;case"email":d=e,(f=x).label=d.find(".fw-text-label").val(),f.required=d.find(".fw-required").prop("checked");break;case"file":s=e,(c=x).label=s.find(".fw-text-label").val(),c.required=s.find(".fw-required").prop("checked"),c.multi=s.find(".fw-file-multi").prop("checked");break;case"date":n=e,(o=x).label=n.find(".fw-text-label").val(),o.format=n.find(".fw-date-format").val(),o.required=n.find(".fw-required").prop("checked");break;case"textarea":l=e,(r=x).label=l.find(".fw-textarea-label").val(),r.required=l.find(".fw-required").prop("checked");break;case"paragraph":i=e,x.text=i.find(".fw-paragraph-text").val();break;case"registration":a=e,(t=x).required=a.find(".fw-required").prop("checked"),t.password=a.find(".msfp-registration-password").prop("checked"),t.firstname=a.find(".msfp-registration-firstname").prop("checked"),t.lastname=a.find(".msfp-registration-lastname").prop("checked"),t.website=a.find(".msfp-registration-website").prop("checked"),t.bio=a.find(".msfp-registration-bio").prop("checked")}return x}function f(e){var a={};a.title=e.find(".fw-part-title").val();var r=a.blocks=[];return e.find(".fw-step-block").each(function(e,a){var t,i,l=z(a);l.find(".msfp-conditional").prop("checked")?r.push(((i={type:"conditional"}).visible=(t=l).find(".msfp-conditional-visible").val(),i.prec_block_id=t.find(".msfp-conditional-prec-block-id").val(),i.prec_operator=t.find(".msfp-conditional-prec-op").val(),i.prec_value=t.find(".msfp-conditional-prec-value").val(),i.block=d(t),i)):r.push(d(l))}),a}function p(e){var a={};a.title=e.find(".fw-step-title").val(),a.headline=e.find(".fw-step-headline").val(),a.copy_text=e.find(".fw-step-copy_text").val();var t=a.parts=[];return e.find(".fw-step-part").each(function(e,a){t.push(f(z(a)))}),a}function b(e){var a,t,i,l=!0;return""===e.title?(l=!1,o(wizard.i18n.alerts.noFormTitle,!1)):l=function(e){for(var a=!0,t=0;t<e.length;t++)if(e[t].title)for(var i=0;i<e[t].parts.length;i++){""===e[t].parts[i].title&&(a=!1,o(wizard.i18n.alerts.noSectionTitle,!1));for(var l=0;l<e[t].parts[i].blocks.length;l++)e[t].parts[i].blocks[l]}else a=!1,o(wizard.i18n.alerts.noStepTitle,!1);return a}(e.wizard.steps)&&(a=e.wizard.settings,i=!0,(t=a.to)&&/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)?a.subject||(i=!1,z("#fw-nav-settings").trigger("click"),o(wizard.i18n.alerts.noSubject,!1)):(i=!1,z("#fw-nav-settings").trigger("click"),o(wizard.i18n.alerts.invalidEmail,!1)),i),l}function v(){var e,a=z(r),t=z(".fw-wizard-title").val(),i={wizard:{}};i.wizard.title=t,i.wizard.steps=[],i.wizard.settings=((e={}).thankyou=z(".fw-settings-thankyou").val(),e.to=z(".fw-mail-to").val(),e.frommail=z(".fw-mail-from-mail").val(),e.fromname=z(".fw-mail-from-name").val(),e.subject=z(".fw-mail-subject").val(),e.header=z(".fw-mail-header").val(),e.headers=z(".fw-mail-headers").val(),e);var l=a.find(".fw-step");l.each(function(e,a){l.length;i.wizard.steps.push(p(z(a)))}),i.wizard.steps.push(),b(i)&&(u("save",i),z.ajax({type:"POST",url:wizard.ajaxurl,dataType:"json",data:{action:"fw_wizard_save",data:i,nonce:wizard.nonce,id:wizard.id},success:function(e){o(e.data.msg,e.success)},error:function(e){u("fail",arguments),u("response",e)}}))}function h(){z(".meta-box-sortables").sortable({opacity:.6,revert:!0,cursor:"move",handle:".hndle",tolerance:"pointer",placeholder:"fw-block-placeholder",start:function(e,a){var t=z(a.item).height();z(".fw-block-placeholder").height(t)},update:function(e,a){n("sortables update",e,a),z(a.item).removeAttr("style"),h(),m()}}),z(".fw-step-part .inside").sortable({opacity:.6,cursor:"move",connectWith:".connectedSortable",handle:".fw-block-hndle",tolerance:"intersect",placeholder:"fw-block-placeholder",revert:100,start:function(e,a){var t=z(a.item).height(),i=z(".fw-block-placholder");i.height(t),i.attr("data-type",a.item.attr("data-type"))},update:function(e,a){n("block sortables update",e,a);var t=z(a.item).attr("data-type"),i=-1;if(z(a.item).is(".fw-draggable-block"))if("registration"===t&&x())o("Only one registration block allowed!",!1),z(a.item).remove();else{var l=z(s({type:t,label:""}));z(a.item).replaceWith(l),i=z(".fw-step-block").index(l)}h(),m(),S(),msfp&&setupConditionals(i)}}),z(".fw-parts-container").sortable({opacity:.6,cursor:"move",connectWith:".fw-parts-container",handle:".fw-section-hndle",tolerance:"intersect",placeholder:"fw-section-placeholder",revert:100,start:function(e,a){var t=z(a.item).height();z(".fw-section-placeholder").height(t)},update:function(e,a){h(),m(),S()}});z(i+" .fw-draggable-block").draggable({connectToSortable:".fw-step-part .inside",revert:"invalid",helper:"clone",cursor:"move"}),z(r).find(".fw-step-title").on("change input",e)}function m(){z(".fa-info-circle").tooltip(),z(".fw-remove-step").tooltip(),z(".fw-duplicate-step").tooltip(),z(".fw-remove-part").tooltip(),z(".fw-remove-block").tooltip(),z(".hndle.ui-sortable-handle").tooltip()}function e(e){var a=z(this);u("titleOnChangeU",a.val()),a.closest(".postbox").find("h1 > span").html(a.val())}function k(e){e.find('.fw-radio-option-element[data-type="option"] > label').each(function(e,a){u("updateOptions",a),z(a).html("Option "+(e+1))})}function g(e){var a=z(".fw-step").length;if(a<5||msfp)if(a<10){var t=z(l(e));t.appendTo(z(r).find(".meta-box-sortables")),S(),h(),C(),0<a&&z("html, body").animate({scrollTop:z(document).height()-t.height()-180},500)}else o(wizard.i18n.alerts.onlyTen,!1);else o(wizard.i18n.alerts.onlyFive,!1)}function y(e){var a="";return"true"==e&&(a="checked"),a}function x(){var t=!1;return z(".fw-step-block").each(function(e,a){"registration"==z(a).attr("data-type")&&(t=!0)}),t}function q(){var e=z(this).closest(".postbox");!0===confirm(wizard.i18n.alerts.reallyDeleteStep)&&e.slideUp(700,function(){e.remove()})}function _(e){var a=z(e.target).closest(".fw-step-part");!0===confirm(wizard.i18n.alerts.reallyDeleteSection)&&a.slideUp(500,function(){a.remove()})}function C(){z(".thickbox").click(function(i){z("#fw-thickbox-radio").unbind("click").click(function(e){tb_remove();var a=z(s({type:"radio"}));z(i.target).parents(".fw-step-part").find(".inside").append(a),S()}),z("#fw-thickbox-select").unbind("click").click(function(e){tb_remove();var a=z(s({type:"select",label:""}));z(i.target).parents(".fw-step-part").find(".inside").append(a),S()}),z("#fw-thickbox-text").unbind("click").click(function(e){tb_remove();var a=z(s({type:"text",label:"",value:""}));z(i.target).parents(".fw-step-part").find(".inside").append(a),S()}),z("#fw-thickbox-email").unbind("click").click(function(e){tb_remove();var a=z(s({type:"email",label:"",value:""}));z(i.target).parents(".fw-step-part").find(".inside").append(a),S()}),z("#fw-thickbox-fileupload").unbind("click").click(function(e){tb_remove();var a=z(s({type:"file",label:"",value:""}));z(i.target).parents(".fw-step-part").find(".inside").append(a),S()}),z("#fw-thickbox-textarea").unbind("click").click(function(e){tb_remove();var a=z(s({type:"textarea",label:"",value:""}));z(i.target).parents(".fw-step-part").find(".inside").append(a),S()}),z("#fw-thickbox-date").unbind("click").click(function(e){tb_remove();var a=z(s({type:"date",label:"",format:"yy-mm-dd"}));z(i.target).parents(".fw-step-part").find(".inside").append(a),S()}),z("#fw-thickbox-paragraph").unbind("click").click(function(e){tb_remove();var a=z(s({type:"paragraph",text:""}));z(i.target).parents(".fw-step-part").find(".inside").append(a),S()}),z("#fw-thickbox-registration").unbind("click").click(function(e){tb_remove();var a=z(s({type:"registration",label:"",value:""})),t=z(i.target).parents(".fw-step-part");x()?o("Only one registration block allowed!",!1):t.find(".inside").append(a),S()})})}function S(){z(".fw-element-step").unbind("click").click(function(e){g({title:"",headline:"",copy_text:"",parts:[{title:"",blocks:[]}]})}),z(".fw-duplicate-step").unbind("click").click(function(e){var a,t=z(this).parent().parent().find(".fw-step");(a=p(t)).title+=" (COPY)",g(a)}),z(".fw-add-part").unbind("click").click(function(e){var a,t;a=e.target,t=c({title:"",blocks:[]},"fw-step-part"),z(a).closest(".fw-step-parts").find(".fw-parts-container").append(t),z(".fw-remove-part").click(function(e){_(e)}),C(),h()}),z(".fw-toggle-step").unbind("click").click(function(e){z(this).parent().parent().find(".fw-step").slideToggle(),z(this).toggleClass("fw-icon-rotated")}),z(".fw-remove-part").unbind("click").click(function(e){_(e)}),z(".fw-remove-block").unbind("click").click(function(e){var a,t;a=z(e.target).closest(".fw-step-block"),t=a.find(".fw-block-label").val(),!0===confirm(wizard.i18n.alerts.reallyDeleteBlock+"\n\n"+t)&&a.slideUp(300,function(){a.remove()})}),z(".fw-toggle-block").unbind("click").click(function(e){var a=z(this).parent().parent();if(a.toggleClass("fw-block-collapsed"),a.hasClass("fw-block-collapsed")){var t=a.find(".fw-block-label").val();a.find("h4").text(t),z(this).addClass("fw-icon-rotated")}else{var i=a.data("type");a.find("h4").text(i),z(this).removeClass("fw-icon-rotated")}})}z(document).ready(function(){try{var e=JSON.parse(wizard.json),a=z(r);e.wizard.title?z(".fw-wizard-title").val(e.wizard.title):z(".fw-wizard-title").val("My Multi Step Form"),function(e){var a,t,i='<div class="postbox-container"><div class="metabox-holder"><div class="meta-box-sortables">';for(a=0,t=e.length;a<t;a++)i+=l(e[a]);i+="</div>",i+='<a class="fw-element-step"><i class="fa fa-plus"></i> '+wizard.i18n.addStep+"</a>",i+="</div></div>",z(r).html(i)}(e.wizard.steps&&0<e.wizard.steps.length?e.wizard.steps:[{title:"",headline:"",copy_text:"",parts:[{title:"",blocks:[]}]}]),(t=e.wizard.settings)&&(t.thankyou&&z(".fw-settings-thankyou").val(t.thankyou),t.subject&&z(".fw-mail-subject").val(t.subject),t.to&&z(".fw-mail-to").val(t.to),t.frommail&&z(".fw-mail-from-mail").val(t.frommail),t.fromname&&z(".fw-mail-from-name").val(t.fromname),t.header&&z(".fw-mail-header").val(t.header),t.headers&&z(".fw-mail-headers").val(t.headers)),z(".fw-button-save").click(v),z(window).scroll(function(){z(".nav-tab-wrapper").height()+19<z(this).scrollTop()?z(i).addClass("fw-sticky"):z(i).removeClass("fw-sticky")}),a.on("click",".postbox .handlediv",function(){z(this).closest(".postbox").toggleClass("closed")}),a.on("click",".fw-radio-add",function(){var e=z(this).prev(".fw-radio-option-container"),a=w("",e.children(".fw-radio-option-element").length);z(a).appendTo(e),k(e)}),a.on("click",".fw-remove-radio-option",function(){u("remove on click");var e=z(this),a=e.closest(".fw-radio-option-container");e.closest(".fw-radio-option-element").remove(),k(a)}),a.on("click",".fw-remove-step",q),h(),m(),C(),S(),z("#fw-nav-settings").click(function(e){z("#fw-nav-steps").toggleClass("nav-tab-active"),z("#fw-nav-settings").toggleClass("nav-tab-active"),z(r).hide(),z(i).hide(),z(".fw-mail-settings-container").show()}),z("#fw-nav-steps").click(function(e){z("#fw-nav-steps").toggleClass("nav-tab-active"),z("#fw-nav-settings").toggleClass("nav-tab-active"),z(".fw-mail-settings-container").hide(),z(r).show(),z(i).show()}),z("#fw-elements-modal").dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,buttons:{Close:function(){z(this).dialog("close")}}})}catch(e){n(e)}var t})}(jQuery);