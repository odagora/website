jQuery(document).ready(function(F){"use strict";var c={},i=[ajax.i18n.errors.requiredFields,ajax.i18n.errors.requiredField,ajax.i18n.errors.someRequired+"<br>"+ajax.i18n.errors.checkFields];function p(){window.console&&console.log.apply(console,arguments)}function w(){window.console&&console.warn.apply(console,arguments)}function s(a,e){a.find('.fw-wizard-step[data-stepId="'+e+'"]').removeClass("fw-current"),a.find('.fw-wizard-step-header[data-stepId="'+e+'"]').removeClass("fw-current"),a.find('.fw-progress-step[data-id="'+e+'"]').removeClass("fw-active"),a.find('.fwp-progress-bar .fwp-circle[data-id="'+e+'"]').removeClass("fwp-active")}function d(a,e){a.find('.fw-wizard-step[data-stepId="'+e+'"]').addClass("fw-current"),a.find('.fw-wizard-step-header[data-stepId="'+e+'"]').addClass("fw-current"),a.find('.fw-progress-step[data-id="'+e+'"]').addClass("fw-active")}function l(){var a=k(F(this)),e=C(a),t=parseInt(e,10),i=a.find('.fwp-progress-bar .fwp-circle[data-id="'+e+'"]'),r=a.find('.fwp-progress-bar .fwp-bar[data-id="'+(t-1)+'"]');a.find('.fw-progress-step[data-id="'+(t-1)+'"]').removeClass("fw-visited"),a.find('.fw-progress-step[data-id="'+e+'"]').removeClass("fw-visited"),i.removeClass("fwp-done"),5==t&&a.find(".fw-progress-bar").removeClass("fw-step-after-fifth"),i.find(".fwp-label").html(parseInt(e,10)+1),r.removeClass("fwp-active"),2<=t&&a.find('.fwp-progress-bar .fwp-bar[data-id="'+(t-2)+'"]').removeClass("fwp-done").addClass("fwp-active"),s(a,e--),a.find('.fwp-progress-bar .fwp-circle[data-id="'+e+'"]').find(".fwp-label").html(parseInt(e,10)+1),d(a,e),0===e&&a.find(".fw-button-previous").hide(),a.find(".fw-button-next").show()}function o(){var a=k(F(this)),e=C(a),t=parseInt(e,10),i=a.find('.fwp-progress-bar .fwp-circle[data-id="'+e+'"]'),r=a.find('.fwp-progress-bar .fwp-bar[data-id="'+e+'"]');A(e)&&(a.find('.fw-progress-step[data-id="'+e+'"]').addClass("fw-visited"),4==t&&a.find(".fw-progress-bar").addClass("fw-step-after-fifth"),i.removeClass("fwp-active").addClass("fwp-done"),i.find(".fwp-label").html("&#10003;"),r.addClass("fwp-active"),1<=t&&a.find('.fwp-progress-bar .fwp-bar[data-id="'+(t-1)+'"]').removeClass("fwp-active").addClass("fwp-done"),s(a,e++),d(a,e),e===x(a)-1&&a.find(".fw-button-next").hide(),a.find(".fw-button-previous").show(),F("html, body").animate({scrollTop:F("#multi-step-form").offset().top-100},500))}function S(a,e,t,i,r){var s={};i?(s[t]=i,q(a,e).push(s)):"true"==r&&(s['<p class="fw-step-summary fw-summary-invalid">'+t]="</p>",q(a,e).push(s))}function r(a,e,t){var i,r,s,n,f,d,l,o,c,p,w,u,v,m,b,h,g,k,x,C,y,j,z,T,_,I=e.attr("data-required");switch(e.attr("data-type")){case"fw-email":case"fw-date":case"fw-text":_=I,S(a,t,(T=e).find("h3").text(),T.find(".fw-text-input").val(),_);break;case"fw-textarea":z=I,S(a,t,(j=e).find("h3").text(),j.find(".fw-textarea").val(),z);break;case"fw-radio":h=a,k=t,x=I,C=(g=e).find("h3").text(),y="",g.find(".fw-choice").each(function(a,e){F(e).find("input").is(":checked")&&(""!=y&&(y+=", "),y+=F(e).find("label").text())}),S(h,k,C,y,x);break;case"fw-select":b=I,S(a,t,(m=e).find("h3").text(),m.find("select").select2("data")[0].text,b);break;case"fw-checkbox":o=a,p=t,w=I,v=(c=e).find("label").text(),c.find(".fw-checkbox").is(":checked")&&(u="yes"),c.hasClass("fw-block-invalid"),S(o,p,v,u,w);break;case"fw-registration":i=a,r=e,s=t,n=I,f=ajax.i18n.registration,d=r.find(".msfp-registration-input[data-id=username]").val(),l=r.find(".msfp-registration-input[data-id=email]").val(),S(i,s,f,d&&l?d+" ("+l+")":ajax.i18n.registrationFailed,n)}}function n(a,e,i){return a.find('.fw-wizard-step[data-stepId="'+e+'"]').find(".fw-step-part").each(function(a,e){var t=F(e).find(".fw-step-part-title").text().trim();F(e).find('.fw-step-block:not(.fw-step-block[style="display: none;"] > .fw-step-block):not(.msfp-block-conditional)').each(function(a,e){r(i,F(e),t)})}),""}function f(a){var e=document.createElement("div");e.innerHTML=a;for(var t=e.getElementsByTagName("script"),i=t.length;i--;)t[i].parentNode.removeChild(t[i]);return e.innerHTML}function u(){var t=[];return F(".fw-step-block[data-type=fw-file]").each(function(a,e){v(e,t)}),t}function v(a,e){for(var t=F(a).find("input")[0].files,i=0;i<t.length;i++)e.push(t[i].name)}function m(a){var e,t=x(a),i={};for(e=0;e<t;e++)n(a,e,i);return i}function b(a){var e,t="";for(e in a)t='<p class="fw-step-summary">'+e+" â€” "+f(a[e])+"</p>";return t}function h(a){var e,t,i="";for(e=0,t=a.length;e<t;e++)i+=b(a[e]);return i}function g(a){var e=function(a){var e="",t=m(a);for(var i in t)e+='<div class="fw-step-summary-part">',e+='<p class="fw-step-summary-title">'+i+"</p>",e+=h(t[i]),e+="</div>";return e}(a),t=a.find(".fw-wizard-summary");t.empty(),t.append(e),F(".fw-toggle-summary").toggle(function(){F(".fw-wizard-summary").slideDown(),F(".fw-toggle-summary").text(ajax.i18n.hideSummary)},function(){F(".fw-wizard-summary").slideUp(),F(".fw-toggle-summary").text(ajax.i18n.showSummary)}),F(".fw-summary-invalid").length?t.prepend('<div class="fw-summary-alert">'+i[2]+"</div>"):F(".fw-summary-alert").remove()}function k(a){return a.closest(".fw-wizard")}function x(a){return a.attr("data-stepCount")}function C(a){return a.find(".fw-current").attr("data-stepId")}function y(a){return a.closest(".fw-wizard-step").attr("data-stepId")}function j(a){return a.closest(".fw-step-part").attr("data-partId")}function z(a){return a.closest(".fw-step-block").attr("data-blockId")}function T(a){var e=[].slice.call(arguments,1),t=0,i=e.length;if(p("args",e),"0"===e[0])throw new TypeError;for(;t<i;t++)a=_(a,e[t]);return a}function _(a,e){return a[e]||(a[e]={}),a[e]}function I(a,e){var t=y(e),i=j(e),r=z(e);return T(c,a.attr("id"),t,i,r)}function q(a,e){return a[e]||(a[e]=[]),a[e]}function E(){var a=F(this),e=k(a),t=a.prop("checked"),i=I(e,a),r=a.attr("data-id");t?i[r]="checked":delete i[r],g(e)}function O(){var a=F(this),e=a.attr("data-id"),t=a.closest(".fw-conditional");t.find(".fw-conditional-then").removeClass("fw-selected"),t.find('.fw-conditional-then[data-id="'+e+'"]').addClass("fw-selected")}function D(){var a,e,t,i,r,s,n,f,d,l=F(this),o=k(l);e=l,r=(a=o).attr("id"),s=e.attr("name"),n=z(e),f=F('.fw-radio[name="'+s+'"]'),d=!1,p("radios",f),f.each(function(a,e){n!==z(F(e))&&(d=!0)}),t=y(e),i=j(e),d?delete T(c,r,t)[i]:delete T(c,r,t,i)[n],g(a),I(o,l)[l.attr("data-id")]="checked",g(o)}function M(){var a=F(this),e=k(a),t=a.val();p(t);var i=a.attr("data-id");I(e,a)[i]=t,a.parents(".fw-step-block").removeClass("fw-block-invalid"),a.parents(".fw-step-block").find(".fw-block-invalid-alert").remove(),g(e)}function P(a){var e=a.find(".fw-text-input").val();return!(!e||!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))||(a.addClass("fw-block-invalid"),!1)}function A(a){var x=!0,C=!0;return F('.fw-wizard-step[data-stepid="'+a+'"] .fw-step-block[data-required="true"]:visible').each(function(a,e){var t,i,r,s,n,f,d,l,o,c,p,w,u,v,m,b,h,g,k=F(e);switch(k.attr("data-type")){case"fw-radio":g=!1,(h=k).children(".fw-choice").find("input").each(function(a,e){F(e).is(":checked")&&(g=!0)}),g||h.addClass("fw-block-invalid"),x=g;break;case"fw-select":b=!1,k.find("select").val()&&(b=!0),x=b;break;case"fw-textarea":x=!!(m=k).find(".fw-textarea").val()||(m.addClass("fw-block-invalid"),!1);break;case"fw-text":x=!!(v=k).find(".fw-text-input").val()||(v.addClass("fw-block-invalid"),!1);break;case"fw-email":x=P(k),x;break;case"fw-file":x=!!(u=k).find(".fw-file-upload-input").val()||(u.addClass("fw-block-invalid"),!1);break;case"fw-date":x=!!(w=k).find(".fw-text-input").val()||(w.addClass("fw-block-invalid"),!1);break;case"fw-checkbox":x=!!(p=k).find(".fw-checkbox").prop("checked")||(p.addClass("fw-block-invalid"),!1);break;case"fw-submit":l=(d=k).find("[data-id=name]").val(),o=d.find("[data-id=email]").val(),c=!0,l&&o||(d.has("input")?c=!0:(d.addClass("fw-block-invalid"),c=!1)),x=c;break;case"fw-registration":i=!0,r=(t=k).find("[data-id=username]"),s=t.find("[data-id=email]"),n=r.hasClass("msfp-reg-username-valid"),f=s.hasClass("msfp-reg-email-valid"),n||(t.addClass("fw-block-invalid"),r.removeClass("msfp-reg-username-valid"),r.addClass("msfp-registration-invalid"),i=!1),f||(t.addClass("fw-block-invalid"),s.removeClass("msfp-reg-email-valid"),s.addClass("msfp-registration-invalid"),i=!1),x=i}x||(C=!1)}),F('.fw-wizard-step[data-stepid="'+a+'"] .fw-step-block[data-type="fw-email"]').each(function(a,e){var t=F(e);""!=t.find(".fw-text-input").val()&&((x=P(t))||(C=!1))}),C||(F(".fw-block-invalid").each(function(a,e){F(e).find(".fw-block-invalid-alert").length<1&&("fw-registration"==F(e).attr("data-type")?F(e).append('<div class="fw-block-invalid-alert">'+ajax.i18n.errors.checkFields+"</div>"):"fw-email"==F(e).attr("data-type")?F(e).append('<div class="fw-block-invalid-alert">'+ajax.i18n.errors.invalidEmail+"</div>"):F(e).append('<div class="fw-block-invalid-alert">'+i[1]+"</div>"))}),function(a,e){F(".fw-alert-user").empty().removeClass("fw-alert-user-fail fw-alert-user-success"),e?F(".fw-alert-user").addClass("fw-alert-user-success").append('<i class="fa fa-check-circle" aria-hidden="true"></i>'):F(".fw-alert-user").addClass("fw-alert-user-fail").append('<i class="fa fa-times-circle" aria-hidden="true"></i>');F(".fw-alert-user").append(a).fadeIn().delay(2e3).fadeOut()}(i[0],!1)),C}function H(a){var e,t,i,r,s,n,f,d,l,o,c=[],p=F(this).closest(".fw-wizard");F(".fw-block-invalid").each(function(a,e){F(e).removeClass("fw-block-invalid")}),o=!0,F(".fw-wizard-step").each(function(a,e){F(e),A(a)||(o=!1)}),o&&(F(".fw-spinner").show(),e=m(p),c=u(),t=p.find('[data-id="email"]').first().val(),p.find("[data-type=fw-registration]")&&(l={},F(".msfp-registration-input").each(function(a,e){var t=F(e).attr("data-id");l[t]=F(e).val()}),i=l),r=e,s=t,n=c,f=i,d=F("#multi-step-form").attr("data-wizardid"),F(".fw-btn-submit").html('<i class="fa fa-spinner"></i> '+ajax.i18n.sending),F.post(ajax.ajaxurl,{action:"fw_send_email",id:d,fw_data:r,email:s,reg:f,attachments:n,nonce:ajax.nonce},function(a){var e=F(".fw-container").attr("data-redirect");e?(window.onbeforeunload=null,window.location.href=e):(F(".fw-btn-submit").addClass("fw-submit-success").html('<i class="fa fa-check-circle"></i> '+ajax.i18n.submitSuccess),F(".fw-btn-submit").unbind("click"))}).fail(function(a){F(".fw-btn-submit").addClass("fw-submit-fail").html('<i class="fa fa-times-circle"></i> '+ajax.i18n.submitError),w("response",a),w("responseText",a.responseText)}))}function L(a,i){var e=F("#multi-step-form").attr("data-wizardid"),r=F(a.target).prop("files"),t=new FormData;t.append("action","fw_upload_file");for(var s=0;s<r.length;s++)t.append("file"+s,r[s]);t.append("id",e),t.append("nonce",ajax.nonce),i.find("i").removeClass("fa-upload fa-times-circle fa-check-circle").addClass("fa-spinner"),i.find("span").text(ajax.i18n.uploadingFile);var n=F(a.target).parent().parent();F.ajax({type:"POST",url:ajax.ajaxurl,data:t,contentType:!1,processData:!1,dataType:"json",success:function(a){if(F("#multi-step-form").length&&(window.onbeforeunload=function(){var a=u();return N(a),"Your uploaded files were deleted from the server for security reasons."}),a.success){n.attr("data-uploaded","true"),i.find("i").removeClass("fa-times-circle fa-spinner").addClass(" fa-check-circle");for(var e="",t=0;t<r.length;t++)0<t&&(e+=", "),e+=r[t].name;i.find("span").html(e)}else i.find("i").removeClass("fa-spinner fa-check-circle").addClass("fa-times-circle"),i.find("span").html(a.error),w(a.error)},fail:function(a){}})}function N(a){F.post(ajax.ajaxurl,{action:"fw_delete_files",filenames:a,nonce:ajax.nonce},function(a){a&&F("[data-type=fw-file]").each(function(a,e){var t=F(e).find("input");t.replaceWith(t.val("").clone(!0)),F(e).find("label > i").removeClass("fa-check-circle").addClass("fa-upload"),F(e).find("label > span").text(ajax.i18n.chooseFile),F(e).attr("data-uploaded","false")})}).fail(function(a){w("response",a),w("responseText",a.responseText)})}function R(){var r=F(".msfp-registration-input[data-id=email]"),s=F(".msfp-registration-input[data-id=username]");r.closest(".fw-step-block");r.on("input",function(a){var e,t,i;t=(e=r).closest(".fw-step-block"),i={action:"msfp_pre_validate_reg_email",email:e.val(),nonce:ajax.nonce},F.ajax({type:"POST",url:ajax.ajaxurl,data:i,dataType:"json",success:function(a){a.success?(e.removeClass("msfp-registration-invalid"),e.addClass("msfp-reg-email-valid"),e.next().next().remove(".fw-block-invalid-alert"),0<t.find(".msfp-reg-username-valid").length&&t.removeClass("fw-block-invalid")):(t.addClass("fw-block-invalid"),e.addClass("msfp-registration-invalid"),e.removeClass("msfp-reg-email-valid"),e.next().next().hasClass("fw-block-invalid-alert")||e.next().after('<div class="fw-block-invalid-alert">'+a.error+"</div>"))},fail:function(a){valid=!1,w("response",a),w("responseText",a.responseText)}})}),s.on("input",function(a){var e,t,i;t=(e=s).closest(".fw-step-block"),i={action:"msfp_pre_validate_reg_username",username:e.val(),nonce:ajax.nonce},F.ajax({type:"POST",url:ajax.ajaxurl,data:i,dataType:"json",success:function(a){a.success?(e.removeClass("msfp-registration-invalid"),e.addClass("msfp-reg-username-valid"),e.next().next().remove(".fw-block-invalid-alert"),0<t.find(".msfp-reg-email-valid").length&&t.removeClass("fw-block-invalid")):(t.addClass("fw-block-invalid"),e.removeClass("msfp-reg-username-valid"),e.addClass("msfp-registration-invalid"),e.next().next().hasClass("fw-block-invalid-alert")||e.next().after('<div class="fw-block-invalid-alert">'+a.error+"</div>"))},fail:function(a){valid=!1,w("response",a),w("responseText",a.responseText)}})})}function e(){var a=F(".fw-wizard");a.each(function(a,e){d(F(e),0)});var e,t,i,r,s,n=x(a),f=a.parent().outerWidth();(5<=n&&769<=f||500<=f)&&a.addClass("fw-large-container"),F('.fw-progress-step[data-id="0"]').addClass("fw-active"),F(".fw-button-previous").hide(),F(".fw-button-previous").click(l),F(".fw-button-next").click(o),"off"==F(".fw-wizard-summary").attr("data-showsummary")&&F(".fw-toggle-summary").remove(),F(".fw-checkbox").change(E),F(".fw-radio").change(D),F(".fw-radio-conditional").change(O),F(".fw-text-input").on("change input",M),F(".fw-textarea").on("change input",M),F(".fw-checkbox, .fw-radio").on("change",function(){F(this).parents(".fw-step-block").removeClass("fw-block-invalid"),F(this).parents(".fw-step-block").find(".fw-block-invalid-alert").remove()}),F(".msfp-registration-input").change(M),F("select").each(function(a,e){F(e).data("search")?F("select").select2({allowClear:!0,placeholder:""}):F(e).select2({minimumResultsForSearch:1/0,allowClear:!0,placeholder:""})}),F(".fw-file-upload-input").each(function(){var a=F(this),t=a.next("label"),i=t.html(),r=a.parent().parent();a.on("change",function(a){var e="";a.target.value&&(e=a.target.value.split("\\").pop()),e?L(a,t):t.html(i)}),a.on("click",function(a){if(a.target.value){var e=[];v(r,e),N(e)}}),a.on("focus",function(){a.addClass("has-focus")}).on("blur",function(){a.removeClass("has-focus")})}),e=F(".fw-datepicker-here").attr("data-dateformat"),F(".fw-datepicker-here").datepicker({dateFormat:e,changeMonth:!0,changeYear:!0}),F(".fw-btn-submit").click(H),t=F(".fw-progress-bar").attr("data-activecolor"),i=F(".fw-progress-bar").attr("data-donecolor"),r=F(".fw-progress-bar").attr("data-nextcolor"),s=F(".fw-progress-bar").attr("data-buttoncolor"),F("head").append('<style id="fw-colors"></style>'),t&&F("head").append("<style>.fw-active .progress, ul.fw-progress-bar li.fw-active:before{background:"+t+"!important;} [data-type=fw-checkbox] input[type=checkbox]:checked+label:before, ul.fw-progress-bar li.fw-active .fw-txt-ellipsis { color: "+t+" !important; } .fw-step-part { border-color: "+t+" !important; }</style>"),i&&F("head").append("<style>ul.fw-progress-bar .fw-active:last-child:before, .fw-progress-step.fw-visited:before{ background:"+i+" !important; } .fw-progress-step.fw-visited, ul.fw-progress-bar .fw-active:last-child .fw-txt-ellipsis, .fw-progress-step.fw-visited .fw-txt-ellipsis { color:"+i+" !important;} ul.fw-progress-bar li.fw-visited:after, .fw-progress-step.fw-visited .fw-circle, .fw-progress-step.fw-visited .fw-circle-1, .fw-progress-step.fw-visited .fw-circle-2{ background-color:"+i+" !important;}</style>"),r&&F("head").append("<style>ul.fw-progress-bar li:before{background:"+r+" !important;} .fw-progress-bar li.fw-active:after, li.fw-progress-step::after, .fw-circle, .fw-circle-1, .fw-circle-2{ background-color:"+r+" !important;} .fw-txt-ellipsis { color: "+r+" !important; } </style>"),s&&F("head").append("<style>.fw-button-previous, .fw-button-next, .fw-button-fileupload { background: "+s+" !important; }</style>"),R(),g(F(".fw-wizard"))}F(document).ready(function(a){F("#multi-step-form").length&&e()})});